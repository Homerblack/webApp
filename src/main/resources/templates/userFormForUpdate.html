<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update User Profile</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">

<div class="max-w-2xl w-full space-y-8 bg-white p-10 rounded-xl shadow-xl">

    <!-- Page Title -->
    <div class="text-center">
        <h2 class="text-3xl font-bold text-gray-900"
            th:text="'Update User (ID: ' + ${users.id} + ')'">
            Update User
        </h2>
        <p class="mt-2 text-sm text-gray-600">Edit user information below</p>
    </div>

    <!-- Success/Error Message from Controller -->
    <div th:if="${message}"
         class="rounded-md p-4 text-sm font-medium text-center"
         th:classappend="${message.contains('success') or ${message.contains('updated')} ? 'bg-green-100 text-green-800 border border-green-300' : 'bg-red-100 text-red-800 border border-red-300'}"
         th:text="${message}">
        <!-- Message will appear here -->
    </div>

    <!-- Update Form -->
    <form th:action="@{/updateUser}" th:object="${users}" method="post" class="space-y-6">

        <!-- Hidden ID field (important for update) -->
        <input type="hidden" th:field="*{id}"/>

        <!-- First Name & Last Name - Side by side on larger screens -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <div>
                <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
                <input id="firstName"
                       type="text"
                       th:field="*{firstName}"
                       required
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
                <p th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}" class="mt-1 text-xs text-red-600"></p>
            </div>

            <div>
                <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                <input id="lastName"
                       type="text"
                       th:field="*{lastName}"
                       required
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
                <p th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}" class="mt-1 text-xs text-red-600"></p>
            </div>
        </div>

        <!-- Email -->
        <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email Address</label>
            <input id="email"
                   type="email"
                   th:field="*{email}"
                   required
                   autocomplete="email"
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
            <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="mt-1 text-xs text-red-600"></p>
        </div>

        <!-- Password Fields -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <div>
                <label for="password" class="block text-sm font-medium text-gray-700">
                    New Password <span class="text-gray-500 text-xs"></span>
                </label>
                <input id="password"
                       type="password"
                       th:field="*{password}"
                       autocomplete="new-password"
                       placeholder="••••••••"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
                <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="mt-1 text-xs text-red-600"></p>
            </div>

            <div>
                <label for="confirmPassword" class="block text-sm font-medium text-gray-700">Confirm New Password</label>
                <input id="confirmPassword"
                       type="password"
                       th:field="*{confirmPassword}"
                       autocomplete="new-password"
                       placeholder="••••••••"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
                <p th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}" class="mt-1 text-xs text-red-600"></p>
            </div>
        </div>

        <!-- Phone & Age -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <div>
                <label for="phoneNumber" class="block text-sm font-medium text-gray-700">Phone Number</label>
                <input id="phoneNumber"
                       type="text"
                       th:field="*{phoneNumber}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"
                       placeholder="+1234567890"/>
            </div>

            <div>
                <label for="age" class="block text-sm font-medium text-gray-700">Age</label>
                <input id="age"
                       type="number"
                       min="13"
                       max="120"
                       th:field="*{age}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
            </div>
        </div>

        <!-- Gender Selection -->
        <div>
            <label for="sex" class="block text-sm font-medium text-gray-700">Gender</label>
            <select id="sex"
                    th:field="*{sex}"
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border">
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other / Prefer not to say</option>
            </select>
        </div>

        <!-- Address Section -->
        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
            <div>
                <label for="postalCode" class="block text-sm font-medium text-gray-700">Postal Code</label>
                <input id="postalCode"
                       type="text"
                       th:field="*{postalCode}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
            </div>

            <div>
                <label for="city" class="block text-sm font-medium text-gray-700">City</label>
                <input id="city"
                       type="text"
                       th:field="*{city}"
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"/>
            </div>
        </div>

        <div>
            <label for="address" class="block text-sm font-medium text-gray-700">Street Address</label>
            <input id="address"
                   type="text"
                   th:field="*{address}"
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-4 py-3 border"
                   placeholder="123 Main Street, Apt 4B"/>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-between items-center pt-6">
            <a th:href="@{/users}" class="text-sm font-medium text-gray-600 hover:text-gray-800">
                ← Back to Users List
            </a>

            <button type="submit"
                    class="px-8 py-3 bg-indigo-600 text-white font-medium rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition shadow-md">
                Update User
            </button>
        </div>

    </form>
</div>

</body>
</html>